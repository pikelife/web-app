//
// Usage:
// node basic.js <command> <args...>
//
var neo4j = require('../');
var db = new neo4j.GraphDatabase('http://localhost:7474');

// <node> <script> <command> <args...>
var command = process.argv[2];
var args = process.argv.slice(3);

if (!command) {
    console.error('Usage: node basic.js <command> <args...>');
    process.exit(1);
}

var query;
var params;
var callback;

switch (command) {

    // create <name>
    case 'create':
        query = 'CREATE (u:ExampleUser {props}) RETURN u';
        params = {
            props: {
                name: args[0]
            }
        };
        callback = function (results) {
            var user = results[0]['u'];
            console.log(user);
        };
        break;

}

db.cypher({
    query: query,
    params: params,
}, function (err, results) {
    if (err) throw err;
    callback(results);
});
