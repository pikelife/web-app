<link rel="import" href="/assets/apps/drawer/select-options.html">

<dom-module id="drawer-list">
  
  <style>
  
    :host .drawer-ctn{
      padding : 16px;
      border-bottom: 1px solid #E0E0E0;
      cursor: pointer;
    }
    
    :host .drawer-ctn:last-of-type{
      border-bottom: 0px solid #2196F3;
    }
    
    :host .drawer-title{
      font-size : 14px;
      margin-bottom: 4px;
    }
    
    :host .header{
      height: 48px;
      background-color:  #2196F3;
      padding: 8px 16px;
    }
    
    :host .header:hover{
      color: rgba(255, 255, 255, 1);
      -webkit-transition: color 0.5s ease-in;
      transition: color 0.2s ease-in;
    }
    
    :host .action-label{
      font-weight: 500;
      font-size: 18px;
      color: rgba(255, 255, 255, 0.5);
      -webkit-transition: color 0.5s ease-out;
      transition: color 0.2s ease-out;
      cursor: pointer;
      line-height: 26px;
    }
    
    :host .action-label:hover{
      color: rgba(255, 255, 255, 1);
      -webkit-transition: color 0.5s ease-in;
      transition: color 0.2s ease-in;
    }
    
    :host .action-icon{
      color: rgba(255, 255, 255, 0.5);
      -webkit-transition: color 0.2s ease-out;
      transition: color 0.2s ease-out;
      cursor: pointer;
    }
    
    :host .action-icon:hover{
      color: rgba(255, 255, 255, 1);
      -webkit-transition: color 0.2s ease-in;
      transition: color 0.2s ease-in;
    }
    
    :host paper-icon-item{
      position: relative;
      color: #424242;
      font-weight: 500;
    }
    
    :host .more-horiz-icon{
      cursor: pointer;
      border-radius: 50%;
      border: 1px solid #E0E0E0;
    }
    
    :host .more-horiz-icon:hover{
        border: 1px solid #000;
    }
    
    :host .sub-menu{
      font-weight: normal;
      font-size: 14px;
    }
    
    :host .drawer-item{
      border-bottom: 1px solid #E0E0E0;
    }
    
    :host .request-type{
      width: 48px;
      text-transform: uppercase;
    }
    
    :host .add-collection, :host .add-api{
      opacity: 0;
      height: 0;
      -webkit-transition: height 0.2s ease-out, opacity 0.1s ease-out;
      transition: height 0.1s ease-out, opacity 0.1s ease-out;
    }
    
    :host .show.add-collection, :host .show.add-api{
      opacity: 1;
      height: 60px;
      padding: 0 16px;
      color: #fff;
      padding-top: 0;
      -webkit-transition: height 0.2s ease-in, opacity 0.3s ease-in;
      transition: height 0.1s ease-in, opacity 0.1s ease-in;
    }
    
    :host paper-input-container{
      --paper-input-container-color: #2196F3;
      --paper-input-container-focus-color : #A66E17;
      --paper-input-container-underline-focus : #A66E17;
    }
    
    :host .add-cancel-btn{
      top: 28px;
      margin-left: 16px;
      cursor: pointer;
      color: #E0E0E0;
    }
  </style>
     
  <template>
    <div class="header horizontal layout">
      <div class="action-label flex">Collections</div>
      <iron-icon class="action-icon" icon="add-circle-outline" on-click="toggleAddCollect"></iron-icon>
    </div>  
    <div class="add-collection horizontal layout">
      <paper-input-container>
        <label>Add a collection</label>
        <input is="iron-input">
      </paper-input-container>
      <iron-icon class="add-cancel-btn" icon="close" on-click="toggleAddCollect"></iron-icon>
    </div> 
    <div>
      <div class="drawer-item">
        <paper-icon-item>
          <iron-icon icon="folder-open" item-icon></iron-icon>
          <div class="flex">name</div>
          <iron-icon icon="more-horiz" class="more-horiz-icon" on-click="showOptions"></iron-icon>
        </paper-icon-item>
        <div class="sub-menu">
          <div class="add-api horizontal layout">
            <paper-input-container>
              <label>Add item</label>
              <input is="iron-input">
            </paper-input-container>
            <iron-icon class="add-cancel-btn" icon="close" on-click="toggleAddApi"></iron-icon>
          </div>
          <paper-icon-item>
            <div class="request-type" style="color: green">get</div>
            <div class="flex">name</div>
          </paper-icon-item>
          <paper-icon-item>
            <div class="request-type" style="color: orange">POST</div>
            <div class="flex">name</div>
          </paper-icon-item>
          <paper-icon-item>
            <div class="request-type" style="color: purple">PUT</div>
            <div class="flex">name</div>
          </paper-icon-item>
          <paper-icon-item>
            <div class="request-type" style="color: red">Delete</div>
            <div class="flex">name</div>
          </paper-icon-item>
        </div>
      </div>
      
      
      <div class="drawer-item">
        <paper-icon-item>
          <iron-icon icon="folder-open" item-icon></iron-icon>
          <div class="flex">name</div>
          <iron-icon icon="more-horiz" class="more-horiz-icon" on-click="showOptions"></iron-icon>
        </paper-icon-item>
        <div class="sub-menu">
        </div>
      </div>
      
      <div class="drawer-item">
        <paper-icon-item>
          <iron-icon icon="folder-open" item-icon></iron-icon>
          <div class="flex">name</div>
          <iron-icon icon="more-horiz" class="more-horiz-icon" on-click="showOptions"></iron-icon>
        </paper-icon-item>
        <div class="sub-menu">
          <paper-icon-item>
            <div class="request-type" style="color: red">Delete</div>
            <div class="flex">name</div>
          </paper-icon-item>
        </div>
      </div>
      
      <div class="drawer-item">
        <paper-icon-item>
          <iron-icon icon="folder-open" item-icon></iron-icon>
          <div class="flex">name</div>
          <iron-icon icon="more-horiz" class="more-horiz-icon" on-click="showOptions"></iron-icon>
        </paper-icon-item>
        <div class="sub-menu">
          <paper-icon-item>
            <div class="request-type" style="color: green">get</div>
            <div class="flex">name</div>
          </paper-icon-item>
        </div>
      </div>
    </div>
    
    <select-options style="display: none"></select-options>
  </template>
	  
	<script>
	
	  Polymer({
	    is: "drawer-list",
	    
	    ready : function(){
	      this.initOptionCloseListener();
	    },
	    
	    initOptionCloseListener : function(){
	      $(window).on('click', 
	        (function(_this){
	          return function(){
	              $("select-options").hide();
	          }
	        })(this))
	    },
	    
	    showOptions: function(){
        $("select-options").css({ "position": "fixed", "top": event.y, "left": "60px" });
        $("select-options").show();
        this.isOptionsHidden++;
        event.stopPropagation();
	    },
	    
	    toggleAddCollect : function(){
	      $(".add-collection").toggleClass("show")
	    },
	    
	    toggleAddApi : function(){
	      $(".add-api").toggleClass("show")
	    }
    });
    
	</script>
	
</dom-module>